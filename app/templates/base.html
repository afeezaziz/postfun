<!doctype html>
<html lang="en" data-theme="terminal">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Postfun{% endblock %}</title>
  {% block meta %}
  <meta property="og:title" content="{{ meta_title or 'Postfun' }}" />
  <meta property="og:description" content="{{ meta_description or 'From posts to markets. Turn vibes into value on Postfun.' }}" />
  <meta property="og:type" content="{{ meta_type or 'website' }}" />
  <meta property="og:url" content="{{ meta_url or request.url }}" />
  {% if meta_image %}
  <meta property="og:image" content="{{ meta_image }}" />
  <meta name="twitter:image" content="{{ meta_image }}" />
  {% endif %}
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="{{ meta_title or 'Postfun' }}" />
  <meta name="twitter:description" content="{{ meta_description or 'From posts to markets. Turn vibes into value on Postfun.' }}" />
  <link rel="canonical" href="{{ meta_url or request.url }}" />
  {% endblock %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/output.css') }}" />
  <script defer src="{{ url_for('static', filename='js/app.js') }}"></script>
</head>
<body>
  <div class="navbar bg-terminal-black border-b border-terminal-green">
    <div class="navbar-start">
      <a class="btn btn-ghost text-xl text-terminal-green font-terminal">Postfun</a>
      <div class="hidden md:flex">
        <ul class="menu menu-horizontal px-1">
          <li><a href="{{ url_for('web.home') }}" class="terminal-nav-link {% if request.endpoint == 'web.home' %}underline{% endif %}">Home</a></li>
          <li><a href="{{ url_for('web.tokens_list') }}" class="terminal-nav-link {% if request.endpoint == 'web.tokens_list' %}underline{% endif %}">Tokens</a></li>
          <li><a href="{{ url_for('web.explore') }}" class="terminal-nav-link {% if request.endpoint == 'web.explore' %}underline{% endif %}">Explore</a></li>
          <li><a href="{{ url_for('web.pro') }}" class="terminal-nav-link {% if request.endpoint == 'web.pro' %}underline{% endif %}">Pro</a></li>
          <li><a href="{{ url_for('web.portfolio') }}" class="terminal-nav-link {% if request.endpoint == 'web.portfolio' %}underline{% endif %}">Portfolio</a></li>
          {% if current_user %}
            <li><a href="{{ url_for('web.watchlist') }}" class="terminal-nav-link {% if request.endpoint == 'web.watchlist' %}underline{% endif %}">Watchlist</a></li>
            <li><a href="{{ url_for('web.alerts') }}" class="terminal-nav-link {% if request.endpoint == 'web.alerts' %}underline{% endif %}">Alerts</a></li>
            {% if current_user.is_admin %}
              <li><a href="{{ url_for('admin.dashboard') }}" class="terminal-nav-link {% if request.endpoint and request.endpoint.startswith('admin.') %}underline{% endif %}">Admin</a></li>
            {% endif %}
          {% endif %}
          <li><a href="{{ url_for('web.launchpad') }}" class="terminal-nav-link {% if request.endpoint == 'web.launchpad' %}underline{% endif %}">Launchpad</a></li>
          <li><a href="{{ url_for('web.dashboard') }}" class="terminal-nav-link {% if request.endpoint == 'web.dashboard' %}underline{% endif %}">Dashboard</a></li>
        </ul>
      </div>
    </div>
    <div class="navbar-end">
      {% if current_user %}
        <span class="text-terminal-dim-green mr-2 font-terminal">{{ current_user.npub or current_user.pubkey_hex }}</span>
        <button class="terminal-button" onclick="pfLogout()">Logout</button>
      {% else %}
        <button class="terminal-button" onclick="pfNostrLogin()">Login with Nostr</button>
      {% endif %}
    </div>
  </div>

  <main class="container mx-auto px-4 py-8 max-w-6xl">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="mb-4 space-y-2">
          {% for category, message in messages %}
            <div class="alert {% if category == 'success' %}bg-terminal-base-200 border-terminal-green text-terminal-green{% elif category == 'error' %}bg-terminal-base-200 border-terminal-red text-terminal-red{% else %}bg-terminal-base-200 border-terminal-green text-terminal-green{% endif %}">
              {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
  </main>

  <footer class="footer bg-terminal-black border-t border-terminal-green p-4">
    <div class="container mx-auto max-w-6xl flex justify-between items-center">
      <span class="text-terminal-green">Â© 2025 Postfun</span>
      <div class="flex space-x-4">
        <a href="{{ url_for('web.about') }}" class="text-terminal-green hover:underline">About</a>
        <a href="{{ url_for('web.stats') }}" class="text-terminal-green hover:underline">Stats</a>
        <a href="{{ url_for('web.faq') }}" class="text-terminal-green hover:underline">FAQ</a>
        <a href="{{ url_for('web.download') }}" class="text-terminal-green hover:underline">Download</a>
      </div>
    </div>
  </footer>
</body>
</html>
