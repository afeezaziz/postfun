{% extends 'base.html' %}
{% block title %}Dashboard | Postfun{% endblock %}
{% block content %}
  <section class="card">
    <h1>Dashboard</h1>
    {% if user or current_user %}
      {% set u = user or current_user %}
      <div class="pf-grid">
        <div class="card pf-dash-panel">
          <h2>User</h2>
          <div>ID: {{ u.id }}</div>
          <div>NPUB: <span class="pf-green">{{ u.npub or u.pubkey_hex }}</span></div>
          <div>Joined: {{ u.created_at }}</div>
          <div style="margin-top:8px;">
            <a class="retro-button" href="{{ url_for('web.user_profile', user_id=u.id) }}">Profile</a>
            <a class="retro-button" href="{{ url_for('web.portfolio') }}">Portfolio</a>
          </div>
        </div>
        <div class="card pf-dash-panel">
          <h2>Portfolio</h2>
          <div>Holdings: <span class="pf-green">—</span></div>
          <div>24h PnL: <span class="pf-green">—</span></div>
        </div>
        <div class="card pf-dash-panel">
          <h2>Quick Actions</h2>
          <a class="retro-button" href="{{ url_for('web.pool', symbol='gBTC') }}">Trade gBTC</a>
          <a class="retro-button" href="{{ url_for('web.pool', symbol='gUSD') }}">Trade gUSD</a>
          <a class="retro-button" href="{{ url_for('web.stats') }}">View Stats</a>
        </div>
      </div>
    {% else %}
      <p>You are not logged in.</p>
      <button class="retro-button" onclick="pfNostrLogin()">Login with Nostr</button>
    {% endif %}
  </section>
{% endblock %}
